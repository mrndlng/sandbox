var ß=function(a){var b=Sizzle(a),c=1===b.length?b[0]:b;return c},Each=function(a,b){a.forEach(function(a,c){b.call(a,c)})},Event=function(a,b,c,d){var e,f=d?"true":"false";a.constructor===Array?(e=a.length,0!==e&&a.forEach(function(a,d){a.addEventListener(b,c.bind(a,d),f)})):a.addEventListener(b,c,f)},RemoveEvent=function(a,b,c,d){var e,f=d?"true":"false";a.constructor===Array?(e=a.length,0!==e&&a.forEach(function(a,d){a.removeEventListener(b,c.bind(a,d),f)})):a.removeEventListener(b,c,f)},Throttle=function(a,b){var c=!1;return function(){c||(a.call(),c=!0,setTimeout(function(){c=!1},b))}},UI={mobile:680,tablet:1026,desktop:1450,desktop2:2e3,init:function(){this.links()},links:function(){var a=ß(".prevent");Event(a,"click",function(a){a.preventDefault()})}};UI.init();var Draw={i:0,id:"#worldofm",full:1,scale:null,drawing:!1,brush:null,brushes:[],touch:Modernizr.touchevents,pointer:{x:0,y:0},init:function(){"12"===document.body.dataset.id&&this.start()},start:function(){this.canvas=ß(this.id),this.caption=ß(".caption span"),this.header=ß("header"),this.context=this.canvas.getContext("2d"),this.cursor=window.getComputedStyle(this.canvas).cursor,this.mouseDownEvent=this.touch?"touchstart":"mousedown",this.mouseMoveEvent=this.touch?"touchmove":"mousemove",this.mouseUpEvent=this.touch?"touchend":"mouseup",this.updateCanvas(),this.loadBrushes(),this.bind()},bind:function(){window.addEventListener("resize",Draw.updateCanvas.bind(this)),this.canvas.addEventListener(this.mouseDownEvent,Draw.down.bind(this)),this.canvas.addEventListener(this.mouseUpEvent,Draw.up.bind(this)),this.canvas.addEventListener(this.mouseMoveEvent,Draw.move.bind(this))},down:function(a){this.drawing=!0,this.canvas.style.cursor="url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7), auto",this.header.classList.add("nopointer"),this.pointPosition(a),this.draw(a),this.insertCaption()},up:function(){this.drawing=!1,this.canvas.style.cursor=this.cursor,this.header.classList.remove("nopointer"),this.caption.innerHTML="",this.switchBrush()},move:function(a){this.drawing&&(a.preventDefault(),this.draw(a))},loadBrushes:function(){var a,b=ß("#slides"),c=b.children;for(i=0;i<c.length;i++)a={img:c[i],caption:c[i].dataset.caption},this.brushes.push(a);this.brush=this.brushes[this.i],b.parentElement.removeChild(b)},switchBrush:function(){this.i+=1,this.i>=this.brushes.length&&(this.i=0),this.brush=this.brushes[this.i]},scaleBrush:function(){window.innerWidth<UI.mobile?this.scale=.2:window.innerWidth<UI.tablet?this.scale=.35:window.innerWidth<UI.desktop?this.scale=.5:window.innerWidth<UI.desktop2?this.scale=.75:this.scale=this.full},insertCaption:function(){this.brush.caption&&(this.caption.innerHTML=this.brush.caption)},draw:function(a){var b,c,d=this.brush.img.width*this.scale,e=this.brush.img.height*this.scale,f={x:this.pointer.x,y:this.pointer.y};this.pointPosition(a);for(var g={x:this.pointer.x,y:this.pointer.y},h=this.pointDistance(f,g),i=this.pointAngle(f,g),j=0;j<=h||0===j;j++)b=f.x+Math.sin(i)*j-d/2,c=f.y+Math.cos(i)*j-e/2,this.context.drawImage(this.brush.img,b,c,d,e)},pointPosition:function(a){var b=this.touch?a.touches[0]:a;this.pointer.x=b.pageX-this.canvas.offsetLeft,this.pointer.y=b.pageY-this.canvas.offsetTop},pointDistance:function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(Math.pow(c,2)+Math.pow(d,2))},pointAngle:function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.atan2(c,d)},updateCanvas:function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.scaleBrush()}};Draw.init(),function(a){a(function(){a("button").click(function(){alert("jQuery alert!"),console.log("hello")})})}(jQuery);var ß=function(a){var b=Sizzle(a),c=1===b.length?b[0]:b;return c},Each=function(a,b){a.forEach(function(a,c){b.call(a,c)})},Event=function(a,b,c,d){var e,f=d?"true":"false";a.constructor===Array?(e=a.length,0!==e&&a.forEach(function(a,d){a.addEventListener(b,c.bind(a,d),f)})):a.addEventListener(b,c,f)},RemoveEvent=function(a,b,c,d){var e,f=d?"true":"false";a.constructor===Array?(e=a.length,0!==e&&a.forEach(function(a,d){a.removeEventListener(b,c.bind(a,d),f)})):a.removeEventListener(b,c,f)},Throttle=function(a,b){var c=!1;return function(){c||(a.call(),c=!0,setTimeout(function(){c=!1},b))}},UI={mobile:680,tablet:1026,desktop:1450,desktop2:2e3,init:function(){this.links()},links:function(){var a=ß(".prevent");Event(a,"click",function(a){a.preventDefault()})}};UI.init();var Draw={i:0,id:"#worldofm",full:1,scale:null,drawing:!1,brush:null,brushes:[],touch:Modernizr.touchevents,pointer:{x:0,y:0},init:function(){"12"===document.body.dataset.id&&this.start()},start:function(){this.canvas=ß(this.id),this.caption=ß(".caption span"),this.header=ß("header"),this.context=this.canvas.getContext("2d"),this.cursor=window.getComputedStyle(this.canvas).cursor,this.mouseDownEvent=this.touch?"touchstart":"mousedown",this.mouseMoveEvent=this.touch?"touchmove":"mousemove",this.mouseUpEvent=this.touch?"touchend":"mouseup",this.updateCanvas(),this.loadBrushes(),this.bind()},bind:function(){window.addEventListener("resize",Draw.updateCanvas.bind(this)),this.canvas.addEventListener(this.mouseDownEvent,Draw.down.bind(this)),this.canvas.addEventListener(this.mouseUpEvent,Draw.up.bind(this)),this.canvas.addEventListener(this.mouseMoveEvent,Draw.move.bind(this))},down:function(a){this.drawing=!0,this.canvas.style.cursor="url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7), auto",this.header.classList.add("nopointer"),this.pointPosition(a),this.draw(a),this.insertCaption()},up:function(){this.drawing=!1,this.canvas.style.cursor=this.cursor,this.header.classList.remove("nopointer"),this.caption.innerHTML="",this.switchBrush()},move:function(a){this.drawing&&(a.preventDefault(),this.draw(a))},loadBrushes:function(){var a,b=ß("#slides"),c=b.children;for(i=0;i<c.length;i++)a={img:c[i],caption:c[i].dataset.caption},this.brushes.push(a);this.brush=this.brushes[this.i],b.parentElement.removeChild(b)},switchBrush:function(){this.i+=1,this.i>=this.brushes.length&&(this.i=0),this.brush=this.brushes[this.i]},scaleBrush:function(){window.innerWidth<UI.mobile?this.scale=.2:window.innerWidth<UI.tablet?this.scale=.35:window.innerWidth<UI.desktop?this.scale=.5:window.innerWidth<UI.desktop2?this.scale=.75:this.scale=this.full},insertCaption:function(){this.brush.caption&&(this.caption.innerHTML=this.brush.caption)},draw:function(a){var b,c,d=this.brush.img.width*this.scale,e=this.brush.img.height*this.scale,f={x:this.pointer.x,y:this.pointer.y};this.pointPosition(a);for(var g={x:this.pointer.x,y:this.pointer.y},h=this.pointDistance(f,g),i=this.pointAngle(f,g),j=0;j<=h||0===j;j++)b=f.x+Math.sin(i)*j-d/2,c=f.y+Math.cos(i)*j-e/2,this.context.drawImage(this.brush.img,b,c,d,e)},pointPosition:function(a){var b=this.touch?a.touches[0]:a;this.pointer.x=b.pageX-this.canvas.offsetLeft,this.pointer.y=b.pageY-this.canvas.offsetTop},pointDistance:function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(Math.pow(c,2)+Math.pow(d,2))},pointAngle:function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.atan2(c,d)},updateCanvas:function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.scaleBrush()}};Draw.init();